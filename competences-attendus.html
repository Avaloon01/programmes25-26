<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Programmes P4 — Compétences & Attendus</title>
  <link rel="stylesheet" href="./styles.css">
  <meta name="theme-color" content="#2563eb">
</head>
<body>
  <div class="container">
    <header>
      <h1>📚 Compétences & Attendus — P4</h1>
      <div class="searchbar">
        <input id="q" type="search" placeholder="Rechercher (domaine, matière, compétence, attendu)…">
        <select id="week" aria-label="Filtrer par semaine">
          <option value="all">Toutes</option>
        </select>
        <button id="export" title="Exporter la vue actuelle en CSV">Exporter CSV</button>
      </div>
      <button type="button" onclick="location.href='index.html'" aria-label="Revenir à l’accueil">← Retour au programme</button>
    </header>

    <div id="tabs" class="tabs"></div>

    <div class="card">
      <table class="table">
        <thead id="headers"></thead>
        <tbody id="rows"></tbody>
      </table>
    </div>

    <p class="footer">Astuce : ajoute cette page à l’écran d’accueil pour l’avoir hors-ligne. Imprime proprement via Ctrl/Cmd+P.</p>
  </div>

  <!-- IMPORTANT : on indique à app.js quelle source JSON charger -->
  <script>
    // app.js doit utiliser window.APP_DATA_URL si présent,
    // sinon retomber sur './data/programmes.json'
    window.APP_DATA_URL = './data/competences_attendus.json';
  </script>
  <script src="./app.js"></script>
</body>
</html>
